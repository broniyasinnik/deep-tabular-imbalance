dataset: "adult_ir50"
seed: 42
ir: 50
train_file: &train_file "./data/adult/ir50/adult_ir50.tra.npz"
holdout_file: &holdout_file "./data/adult/ir50/adult_ir50.hout.npz"
valid_file: &valid_file "./data/adult/ir50/adult_ir50.val.npz"
test_file: &test_file "./data/adult/ir50/adult_ir50.tst.npz"
smote_file: &smote_file "./data/adult/ir50/adult_ir50.smt.npz"

model:
  input_dim: 14
  hiddens: [128, 16]
  init_last_layer: False

experiments:
  potential:
    runner:
      _target_: ClassificationRunner
    epochs: 200
    batch_size: 128
    datasets:
      train:
        - *train_file
        - *holdout_file
      valid:
        - *valid_file
    optimizer:
      _target_: Adam
      lr: 1.0e-2
      weight_decay: 5.0e-5

  base:
    runner:
      _target_: ClassificationRunner
    epochs: 200
    batch_size: 128
    datasets:
      train:
        - *train_file
      valid:
        - *valid_file
    optimizer:
      _target_: Adam
      lr: 1.0e-2
      weight_decay: 5.0e-5

  upsampling:
    runner:
      _target_: ClassificationRunner
    epochs: 200
    batch_size: 128
    datasets:
      train:
        - *train_file
      valid:
        - *valid_file
    sampler:
      _target_: BalanceClassSampler
      mode: upsampling
    optimizer:
      _target_: Adam
      lr: 1.0e-2
      weight_decay: 5.0e-5

  downsampling:
    runner:
      _target_: ClassificationRunner
    epochs: 200
    batch_size: 128
    datasets:
      train:
        - *train_file
      valid:
        - *valid_file
    sampler:
      _target_: BalanceClassSampler
      mode: downsampling
    optimizer:
      _target_: Adam
      lr: 1.0e-2
      weight_decay: 5.0e-5
      
  smote:
    runner:
      _target_: ClassificationRunner
    epochs: 10
    batch_size: 128
    datasets:
      train:
        - *train_file
        - *smote_file
      valid:
        - *valid_file
    optimizer:
      _target_: Adam
      lr: 1.0e-2
      weight_decay: 5.0e-5

  meta1:
    batch_size: 256
    epochs: 1000
#    preload: "./experiments/adult_ir_50/base/checkpoints/best.pth"
    runner:
      _target_: MetaClassificationRunner
    datasets:
      train:
        - "./data/adult/ir50/adult_ir50.tra1.npz"
      train_hold_out:
        - "./data/adult/ir50/adult_ir50.tra2.npz"
      synthetic:
        - "./data/adult/ir50/low_minority_q50.npz"
      valid:
        - *valid_file
      valid_hold_out:
        - "./data/adult/ir50/adult_ir50.hout.npz"
    hparams:
      lr_model: 1.0e-2
      lr_data: 1.0e+3
      alpha: 0.0
      batch_synthetic: 256
      batch_holdout: 256
